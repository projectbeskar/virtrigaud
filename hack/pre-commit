#!/bin/bash
# Pre-commit hook for virtrigaud
# This script runs formatting and linting checks before commits

set -e

echo "ğŸ”§ Running pre-commit checks..."

# Format code
echo "ğŸ“ Formatting code..."
if command -v gofumpt &> /dev/null; then
    gofumpt -l -w .
else
    echo "âš ï¸  gofumpt not found, skipping formatting"
fi

# Organize imports
if command -v gci &> /dev/null; then
    gci write --skip-generated .
else
    echo "âš ï¸  gci not found, skipping import organization"
fi

# Run linter
echo "ğŸ” Running linter..."
make lint-check

echo "âœ… Pre-commit checks passed!"
