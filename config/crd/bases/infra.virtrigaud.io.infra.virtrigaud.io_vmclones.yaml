---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: vmclones.infra.virtrigaud.io.infra.virtrigaud.io
spec:
  group: infra.virtrigaud.io.infra.virtrigaud.io
  names:
    kind: VMClone
    listKind: VMCloneList
    plural: vmclones
    singular: vmclone
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.sourceRef.name
      name: Source
      type: string
    - jsonPath: .spec.target.name
      name: Target
      type: string
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .status.linkedClone
      name: Linked
      type: boolean
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: VMClone is the Schema for the vmclones API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: VMCloneSpec defines the desired state of VMClone
            properties:
              customization:
                description: Customization defines VM customization options
                properties:
                  hostname:
                    description: Hostname sets the target VM hostname
                    type: string
                  networks:
                    description: Networks defines network customization
                    items:
                      description: NetworkCustomization defines network-specific customization
                      properties:
                        dns:
                          description: DNS sets DNS servers
                          items:
                            type: string
                          type: array
                        gateway:
                          description: Gateway sets the network gateway
                          type: string
                        ipAddress:
                          description: IPAddress sets a static IP address
                          type: string
                        name:
                          description: Name identifies the network to customize
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                  tags:
                    description: Tags defines additional tags for the cloned VM
                    items:
                      type: string
                    type: array
                  userData:
                    description: UserData provides cloud-init or similar customization
                      data
                    properties:
                      cloudInit:
                        description: CloudInit contains cloud-init specific configuration
                        properties:
                          inline:
                            description: Inline contains inline cloud-init configuration
                            type: string
                          secretRef:
                            description: SecretRef references a Secret containing
                              cloud-init data
                            properties:
                              name:
                                description: Name of the referenced object
                                type: string
                              namespace:
                                description: Namespace of the referenced object (defaults
                                  to current namespace)
                                type: string
                            required:
                            - name
                            type: object
                        type: object
                    type: object
                type: object
              linked:
                description: Linked indicates whether to create a linked clone (best
                  effort)
                type: boolean
              powerOn:
                description: PowerOn indicates whether to power on the cloned VM
                type: boolean
              sourceRef:
                description: SourceRef references the source virtual machine to clone
                properties:
                  name:
                    description: Name of the referenced object
                    type: string
                required:
                - name
                type: object
              target:
                description: Target defines the target VM configuration
                properties:
                  classRef:
                    description: ClassRef references the VM class for resource allocation
                    properties:
                      name:
                        description: Name of the referenced object
                        type: string
                    required:
                    - name
                    type: object
                  disks:
                    description: Disks defines disk configuration overrides
                    items:
                      description: DiskSpec defines additional disk requirements
                      properties:
                        name:
                          description: Name provides a name for the disk
                          type: string
                        sizeGiB:
                          description: SizeGiB specifies disk size in GiB
                          format: int32
                          type: integer
                        type:
                          description: Type specifies the disk type (thin, thick,
                            etc.)
                          type: string
                      required:
                      - sizeGiB
                      type: object
                    type: array
                  imageRef:
                    description: ImageRef references the VM image (if different from
                      source)
                    properties:
                      name:
                        description: Name of the referenced object
                        type: string
                    required:
                    - name
                    type: object
                  name:
                    description: Name is the name of the target VM
                    type: string
                  namespace:
                    description: Namespace is the namespace for the target VM (defaults
                      to source namespace)
                    type: string
                  networks:
                    description: Networks defines network configuration overrides
                    items:
                      description: VMNetworkAttachment is the Schema for the vmnetworkattachments
                        API.
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          type: object
                        spec:
                          description: VMNetworkAttachmentSpec defines the desired
                            state of VMNetworkAttachment.
                          properties:
                            ipPolicy:
                              default: dhcp
                              description: IPPolicy specifies the default IP assignment
                                policy
                              enum:
                              - dhcp
                              - static
                              type: string
                            libvirt:
                              description: Libvirt contains Libvirt-specific network
                                configuration
                              properties:
                                bridge:
                                  description: Bridge specifies the bridge name
                                  type: string
                                model:
                                  default: virtio
                                  description: Model specifies the network device
                                    model
                                  enum:
                                  - virtio
                                  - e1000
                                  - rtl8139
                                  type: string
                                networkName:
                                  description: NetworkName specifies the Libvirt network
                                    name
                                  type: string
                              type: object
                            macAddress:
                              description: MacAddress specifies a static MAC address
                              type: string
                            vsphere:
                              description: VSphere contains vSphere-specific network
                                configuration
                              properties:
                                networkName:
                                  description: NetworkName specifies the vSphere network
                                    name
                                  type: string
                                portgroup:
                                  description: Portgroup specifies the vSphere portgroup
                                    name
                                  type: string
                                vlan:
                                  description: VLAN specifies the VLAN ID
                                  format: int32
                                  type: integer
                              type: object
                          type: object
                        status:
                          description: VMNetworkAttachmentStatus defines the observed
                            state of VMNetworkAttachment.
                          properties:
                            availableOn:
                              description: AvailableOn lists the providers where the
                                network is available
                              items:
                                type: string
                              type: array
                            conditions:
                              description: Conditions represent the latest available
                                observations
                              items:
                                description: Condition contains details for one aspect
                                  of the current state of this API Resource.
                                properties:
                                  lastTransitionTime:
                                    description: |-
                                      lastTransitionTime is the last time the condition transitioned from one status to another.
                                      This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                                    format: date-time
                                    type: string
                                  message:
                                    description: |-
                                      message is a human readable message indicating details about the transition.
                                      This may be an empty string.
                                    maxLength: 32768
                                    type: string
                                  observedGeneration:
                                    description: |-
                                      observedGeneration represents the .metadata.generation that the condition was set based upon.
                                      For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                                      with respect to the current state of the instance.
                                    format: int64
                                    minimum: 0
                                    type: integer
                                  reason:
                                    description: |-
                                      reason contains a programmatic identifier indicating the reason for the condition's last transition.
                                      Producers of specific condition types may define expected values and meanings for this field,
                                      and whether the values are considered a guaranteed API.
                                      The value should be a CamelCase string.
                                      This field may not be empty.
                                    maxLength: 1024
                                    minLength: 1
                                    pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                                    type: string
                                  status:
                                    description: status of the condition, one of True,
                                      False, Unknown.
                                    enum:
                                    - "True"
                                    - "False"
                                    - Unknown
                                    type: string
                                  type:
                                    description: type of condition in CamelCase or
                                      in foo.example.com/CamelCase.
                                    maxLength: 316
                                    pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                                    type: string
                                required:
                                - lastTransitionTime
                                - message
                                - reason
                                - status
                                - type
                                type: object
                              type: array
                            observedGeneration:
                              description: ObservedGeneration reflects the generation
                                observed by the controller
                              format: int64
                              type: integer
                            ready:
                              description: Ready indicates if the network is ready
                                for use
                              type: boolean
                          type: object
                      type: object
                    type: array
                  placementRef:
                    description: PlacementRef references placement policy for the
                      target VM
                    properties:
                      name:
                        description: Name of the referenced object
                        type: string
                    required:
                    - name
                    type: object
                required:
                - name
                type: object
            required:
            - sourceRef
            - target
            type: object
          status:
            description: VMCloneStatus defines the observed state of VMClone
            properties:
              completionTime:
                description: CompletionTime is when the clone operation completed
                format: date-time
                type: string
              conditions:
                description: Conditions represent the current service state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              linkedClone:
                description: LinkedClone indicates whether a linked clone was actually
                  created
                type: boolean
              message:
                description: Message provides additional details about the current
                  state
                type: string
              phase:
                description: Phase represents the current phase of the clone operation
                enum:
                - Pending
                - Cloning
                - Customizing
                - Ready
                - Failed
                type: string
              startTime:
                description: StartTime is when the clone operation started
                format: date-time
                type: string
              targetRef:
                description: TargetRef references the created target VM
                properties:
                  name:
                    description: Name of the referenced object
                    type: string
                required:
                - name
                type: object
              taskRef:
                description: TaskRef tracks any ongoing async operations
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
