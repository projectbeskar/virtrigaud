<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CLI API Reference - VirtRigaud Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Kubernetes operator for managing virtual machines across multiple hypervisors">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">Introduction</a></li><li class="chapter-item affix "><li class="part-title">Getting Started</li><li class="chapter-item "><a href="../getting-started/quickstart.html"><strong aria-hidden="true">1.</strong> 15-Minute Quickstart</a></li><li class="chapter-item "><a href="../install-helm-only.html"><strong aria-hidden="true">2.</strong> Installation Guide</a></li><li class="chapter-item "><a href="../HELM_CRD_UPGRADES.html"><strong aria-hidden="true">3.</strong> Helm CRD Upgrades</a></li><li class="chapter-item affix "><li class="part-title">Core Documentation</li><li class="chapter-item "><a href="../CRDs.html"><strong aria-hidden="true">4.</strong> Custom Resource Definitions</a></li><li class="chapter-item "><a href="../EXAMPLES.html"><strong aria-hidden="true">5.</strong> Examples</a></li><li class="chapter-item "><a href="../PROVIDERS.html"><strong aria-hidden="true">6.</strong> Provider Documentation</a></li><li class="chapter-item "><a href="../PROVIDERS_CAPABILITIES.html"><strong aria-hidden="true">7.</strong> Provider Capabilities Matrix</a></li><li class="chapter-item affix "><li class="part-title">Provider-Specific Guides</li><li class="chapter-item "><a href="../providers/vsphere.html"><strong aria-hidden="true">8.</strong> vSphere Provider</a></li><li class="chapter-item "><a href="../providers/libvirt.html"><strong aria-hidden="true">9.</strong> Libvirt Provider</a></li><li class="chapter-item "><a href="../providers/proxmox.html"><strong aria-hidden="true">10.</strong> Proxmox VE Provider</a></li><li class="chapter-item "><a href="../providers/tutorial.html"><strong aria-hidden="true">11.</strong> Provider Tutorial</a></li><li class="chapter-item "><a href="../providers/versioning.html"><strong aria-hidden="true">12.</strong> Provider Versioning</a></li><li class="chapter-item affix "><li class="part-title">Advanced Features</li><li class="chapter-item "><a href="../ADVANCED_LIFECYCLE.html"><strong aria-hidden="true">13.</strong> VM Lifecycle Management</a></li><li class="chapter-item "><a href="../NESTED_VIRTUALIZATION.html"><strong aria-hidden="true">14.</strong> Nested Virtualization</a></li><li class="chapter-item "><a href="../GRACEFUL_SHUTDOWN.html"><strong aria-hidden="true">15.</strong> Graceful Shutdown</a></li><li class="chapter-item "><a href="../REMOTE_PROVIDERS.html"><strong aria-hidden="true">16.</strong> Remote Providers</a></li><li class="chapter-item affix "><li class="part-title">Operations & Administration</li><li class="chapter-item "><a href="../OBSERVABILITY.html"><strong aria-hidden="true">17.</strong> Observability</a></li><li class="chapter-item "><a href="../SECURITY.html"><strong aria-hidden="true">18.</strong> Security</a></li><li class="chapter-item "><a href="../RESILIENCE.html"><strong aria-hidden="true">19.</strong> Resilience</a></li><li class="chapter-item "><a href="../UPGRADE.html"><strong aria-hidden="true">20.</strong> Upgrade Guide</a></li><li class="chapter-item "><a href="../VSPHERE_HARDWARE_VERSION.html"><strong aria-hidden="true">21.</strong> vSphere Hardware Versions</a></li><li class="chapter-item affix "><li class="part-title">Security Configuration</li><li class="chapter-item "><a href="../providers/security/bearer-token.html"><strong aria-hidden="true">22.</strong> Bearer Token Authentication</a></li><li class="chapter-item "><a href="../providers/security/mtls.html"><strong aria-hidden="true">23.</strong> mTLS Configuration</a></li><li class="chapter-item "><a href="../providers/security/external-secrets.html"><strong aria-hidden="true">24.</strong> External Secrets</a></li><li class="chapter-item "><a href="../providers/security/network-policies.html"><strong aria-hidden="true">25.</strong> Network Policies</a></li><li class="chapter-item affix "><li class="part-title">API Reference</li><li class="chapter-item "><a href="../CLI.html"><strong aria-hidden="true">26.</strong> CLI Tools Reference</a></li><li class="chapter-item expanded "><a href="../api-reference/cli.html" class="active"><strong aria-hidden="true">27.</strong> CLI API Reference</a></li><li class="chapter-item "><a href="../api-reference/metrics.html"><strong aria-hidden="true">28.</strong> Metrics Catalog</a></li><li class="chapter-item "><a href="../catalog.html"><strong aria-hidden="true">29.</strong> Provider Catalog</a></li><li class="chapter-item affix "><li class="part-title">Development</li><li class="chapter-item "><a href="../TESTING_WORKFLOWS_LOCALLY.html"><strong aria-hidden="true">30.</strong> Testing Workflows Locally</a></li><li class="chapter-item "><a href="../../../CONTRIBUTING.html"><strong aria-hidden="true">31.</strong> Contributing</a></li><li class="chapter-item affix "><li class="part-title">Examples</li><li class="chapter-item "><a href="../examples/index.html"><strong aria-hidden="true">32.</strong> Example README</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">VirtRigaud Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/projectbeskar/virtrigaud" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/projectbeskar/virtrigaud/edit/main/docs/src/api-reference/cli.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cli-reference"><a class="header" href="#cli-reference">CLI Reference</a></h1>
<p>VirtRigaud provides several command-line tools for managing virtual machines, testing providers, and developing new providers. All tools are available as part of VirtRigaud v0.2.0.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Tool</th><th>Purpose</th><th>Target Users</th></tr></thead><tbody>
<tr><td><a href="#vrtg"><code>vrtg</code></a></td><td>Main CLI for VM management</td><td>End users, DevOps teams</td></tr>
<tr><td><a href="#vcts"><code>vcts</code></a></td><td>Conformance testing suite</td><td>Provider developers, QA teams</td></tr>
<tr><td><a href="#vrtg-provider"><code>vrtg-provider</code></a></td><td>Provider development toolkit</td><td>Provider developers</td></tr>
<tr><td><a href="#virtrigaud-loadgen"><code>virtrigaud-loadgen</code></a></td><td>Load testing and benchmarking</td><td>Performance engineers</td></tr>
</tbody></table>
</div>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<h3 id="from-github-releases"><a class="header" href="#from-github-releases">From GitHub Releases</a></h3>
<pre><code class="language-bash"># Download the latest release
curl -L "https://github.com/projectbeskar/virtrigaud/releases/download/v0.2.0/vrtg-linux-amd64" -o vrtg
chmod +x vrtg
sudo mv vrtg /usr/local/bin/

# Install all CLI tools
curl -L "https://github.com/projectbeskar/virtrigaud/releases/download/v0.2.0/virtrigaud-cli-linux-amd64.tar.gz" | tar xz
sudo mv vrtg vcts vrtg-provider virtrigaud-loadgen /usr/local/bin/
</code></pre>
<h3 id="from-source"><a class="header" href="#from-source">From Source</a></h3>
<pre><code class="language-bash">git clone https://github.com/projectbeskar/virtrigaud.git
cd virtrigaud

# Build all CLI tools
make build-cli

# Install to /usr/local/bin
sudo make install-cli
</code></pre>
<h3 id="using-go"><a class="header" href="#using-go">Using Go</a></h3>
<pre><code class="language-bash">go install github.com/projectbeskar/virtrigaud/cmd/vrtg@v0.2.0
go install github.com/projectbeskar/virtrigaud/cmd/vcts@v0.2.0
go install github.com/projectbeskar/virtrigaud/cmd/vrtg-provider@v0.2.0
go install github.com/projectbeskar/virtrigaud/cmd/virtrigaud-loadgen@v0.2.0
</code></pre>
<h2 id="vrtg"><a class="header" href="#vrtg">vrtg</a></h2>
<p>The main CLI tool for managing VirtRigaud resources and virtual machines.</p>
<h3 id="global-flags"><a class="header" href="#global-flags">Global Flags</a></h3>
<pre><code class="language-bash">--kubeconfig string   Path to kubeconfig file (default: $KUBECONFIG or ~/.kube/config)
--namespace string    Kubernetes namespace (default: "default")
--output string       Output format: table, json, yaml (default: "table")
--timeout duration    Operation timeout (default: 5m0s)
-h, --help           Help for vrtg
</code></pre>
<h3 id="commands"><a class="header" href="#commands">Commands</a></h3>
<h4 id="vm"><a class="header" href="#vm">vm</a></h4>
<p>Manage virtual machines.</p>
<pre><code class="language-bash"># List all VMs
vrtg vm list

# Get detailed VM information
vrtg vm get &lt;vm-name&gt;

# Create a VM from configuration
vrtg vm create --file vm.yaml

# Delete a VM
vrtg vm delete &lt;vm-name&gt;

# Power operations
vrtg vm start &lt;vm-name&gt;
vrtg vm stop &lt;vm-name&gt;
vrtg vm restart &lt;vm-name&gt;

# Scale VMSet
vrtg vm scale &lt;vmset-name&gt; --replicas 5

# Get VM console URL
vrtg vm console &lt;vm-name&gt;

# Watch VM status changes
vrtg vm watch &lt;vm-name&gt;
</code></pre>
<p><strong>Examples:</strong></p>
<pre><code class="language-bash"># List VMs with custom output
vrtg vm list --output json --namespace production

# Create VM with timeout
vrtg vm create --file my-vm.yaml --timeout 10m

# Power on all VMs in namespace
vrtg vm list --output json | jq -r '.items[].metadata.name' | xargs -I {} vrtg vm start {}
</code></pre>
<h4 id="provider"><a class="header" href="#provider">provider</a></h4>
<p>Manage provider configurations.</p>
<pre><code class="language-bash"># List providers
vrtg provider list

# Get provider details
vrtg provider get &lt;provider-name&gt;

# Check provider connectivity
vrtg provider validate &lt;provider-name&gt;

# Get provider capabilities
vrtg provider capabilities &lt;provider-name&gt;

# View provider logs
vrtg provider logs &lt;provider-name&gt;

# Test provider functionality
vrtg provider test &lt;provider-name&gt;
</code></pre>
<p><strong>Examples:</strong></p>
<pre><code class="language-bash"># Validate all providers
vrtg provider list --output json | jq -r '.items[].metadata.name' | xargs -I {} vrtg provider validate {}

# Get detailed provider status
vrtg provider get vsphere-prod --output yaml
</code></pre>
<h4 id="image"><a class="header" href="#image">image</a></h4>
<p>Manage VM images and templates.</p>
<pre><code class="language-bash"># List available images
vrtg image list

# Get image details
vrtg image get &lt;image-name&gt;

# Prepare an image
vrtg image prepare &lt;image-name&gt;

# Delete an image
vrtg image delete &lt;image-name&gt;
</code></pre>
<h4 id="snapshot"><a class="header" href="#snapshot">snapshot</a></h4>
<p>Manage VM snapshots.</p>
<pre><code class="language-bash"># List snapshots for a VM
vrtg snapshot list --vm &lt;vm-name&gt;

# Create a snapshot
vrtg snapshot create &lt;vm-name&gt; --name "pre-upgrade"

# Restore from snapshot
vrtg snapshot restore &lt;vm-name&gt; &lt;snapshot-name&gt;

# Delete a snapshot
vrtg snapshot delete &lt;vm-name&gt; &lt;snapshot-name&gt;
</code></pre>
<h4 id="completion"><a class="header" href="#completion">completion</a></h4>
<p>Generate shell completion scripts.</p>
<pre><code class="language-bash"># Bash
vrtg completion bash &gt; /etc/bash_completion.d/vrtg

# Zsh
vrtg completion zsh &gt; "${fpath[1]}/_vrtg"

# Fish
vrtg completion fish &gt; ~/.config/fish/completions/vrtg.fish

# PowerShell
vrtg completion powershell &gt; vrtg.ps1
</code></pre>
<h3 id="configuration"><a class="header" href="#configuration">Configuration</a></h3>
<p>vrtg uses the same kubeconfig as kubectl. Configuration precedence:</p>
<ol>
<li><code>--kubeconfig</code> flag</li>
<li><code>KUBECONFIG</code> environment variable</li>
<li><code>~/.kube/config</code></li>
</ol>
<h4 id="config-file"><a class="header" href="#config-file">Config File</a></h4>
<p>Create <code>~/.vrtg/config.yaml</code> for default settings:</p>
<pre><code class="language-yaml">defaults:
  namespace: "virtrigaud-system"
  timeout: "10m"
  output: "table"
providers:
  preferred: "vsphere-prod"
output:
  colors: true
  timestamps: true
</code></pre>
<h2 id="vcts"><a class="header" href="#vcts">vcts</a></h2>
<p>VirtRigaud Conformance Test Suite for validating provider implementations.</p>
<h3 id="global-flags-1"><a class="header" href="#global-flags-1">Global Flags</a></h3>
<pre><code class="language-bash">--kubeconfig string   Path to kubeconfig file
--namespace string    Test namespace (default: "vcts")
--provider string     Provider to test
--output-dir string   Directory for test results
--timeout duration    Test timeout (default: 30m)
--parallel int        Number of parallel tests (default: 1)
--skip strings        Tests to skip (comma-separated)
--verbose             Verbose output
-h, --help           Help for vcts
</code></pre>
<h3 id="commands-1"><a class="header" href="#commands-1">Commands</a></h3>
<h4 id="run"><a class="header" href="#run">run</a></h4>
<p>Run conformance tests against a provider.</p>
<pre><code class="language-bash"># Run all tests
vcts run --provider vsphere-prod

# Run specific test suites
vcts run --provider vsphere-prod --suites core,storage

# Run with custom configuration
vcts run --provider libvirt-test --config test-config.yaml

# Skip specific tests
vcts run --provider vsphere-prod --skip "test-large-vm,test-snapshot-memory"

# Generate detailed report
vcts run --provider vsphere-prod --output-dir ./test-results --verbose
</code></pre>
<h4 id="list"><a class="header" href="#list">list</a></h4>
<p>List available test suites and tests.</p>
<pre><code class="language-bash"># List all test suites
vcts list suites

# List tests in a suite
vcts list tests --suite core

# List supported providers
vcts list providers
</code></pre>
<h4 id="validate"><a class="header" href="#validate">validate</a></h4>
<p>Validate test configuration.</p>
<pre><code class="language-bash"># Validate configuration file
vcts validate --config test-config.yaml

# Validate provider setup
vcts validate --provider vsphere-prod
</code></pre>
<h3 id="test-suites"><a class="header" href="#test-suites">Test Suites</a></h3>
<h4 id="core-suite"><a class="header" href="#core-suite">Core Suite</a></h4>
<ul>
<li>Basic VM lifecycle (create, start, stop, delete)</li>
<li>Provider connectivity and authentication</li>
<li>Resource allocation and management</li>
</ul>
<h4 id="storage-suite"><a class="header" href="#storage-suite">Storage Suite</a></h4>
<ul>
<li>Disk creation and attachment</li>
<li>Volume expansion operations</li>
<li>Storage pool management</li>
</ul>
<h4 id="network-suite"><a class="header" href="#network-suite">Network Suite</a></h4>
<ul>
<li>Network interface management</li>
<li>IP address allocation</li>
<li>Network connectivity tests</li>
</ul>
<h4 id="snapshot-suite"><a class="header" href="#snapshot-suite">Snapshot Suite</a></h4>
<ul>
<li>Snapshot creation and deletion</li>
<li>Snapshot restoration</li>
<li>Memory state preservation</li>
</ul>
<h4 id="performance-suite"><a class="header" href="#performance-suite">Performance Suite</a></h4>
<ul>
<li>VM creation performance</li>
<li>Resource utilization benchmarks</li>
<li>Concurrent operation handling</li>
</ul>
<h3 id="test-configuration"><a class="header" href="#test-configuration">Test Configuration</a></h3>
<p>Create <code>test-config.yaml</code>:</p>
<pre><code class="language-yaml">provider:
  name: "vsphere-prod"
  type: "vsphere"
  
tests:
  core:
    enabled: true
    timeout: "15m"
  storage:
    enabled: true
    testDiskSize: "10Gi"
  network:
    enabled: false  # Skip network tests
    
resources:
  vmClass: "test-small"
  vmImage: "ubuntu-22-04"
  
cleanup:
  enabled: true
  timeout: "10m"
</code></pre>
<h2 id="vrtg-provider"><a class="header" href="#vrtg-provider">vrtg-provider</a></h2>
<p>Development toolkit for creating and maintaining VirtRigaud providers.</p>
<h3 id="global-flags-2"><a class="header" href="#global-flags-2">Global Flags</a></h3>
<pre><code class="language-bash">--verbose            Enable verbose output
-h, --help          Help for vrtg-provider
</code></pre>
<h3 id="commands-2"><a class="header" href="#commands-2">Commands</a></h3>
<h4 id="init"><a class="header" href="#init">init</a></h4>
<p>Initialize a new provider project.</p>
<pre><code class="language-bash"># Create a new provider
vrtg-provider init --name hyperv --type hyperv --output ./hyperv-provider

# Create with custom options
vrtg-provider init --name aws-ec2 --type aws \
  --capabilities snapshots,linked-clones \
  --output ./aws-provider
</code></pre>
<p><strong>Options:</strong></p>
<ul>
<li><code>--name</code>: Provider name</li>
<li><code>--type</code>: Provider type</li>
<li><code>--capabilities</code>: Comma-separated capabilities list</li>
<li><code>--output</code>: Output directory</li>
<li><code>--remote</code>: Generate remote provider (default: true)</li>
</ul>
<h4 id="generate"><a class="header" href="#generate">generate</a></h4>
<p>Generate code for provider components.</p>
<pre><code class="language-bash"># Generate API types
vrtg-provider generate api --provider-type vsphere

# Generate client code
vrtg-provider generate client --provider-type vsphere --api-version v1

# Generate test suite
vrtg-provider generate tests --provider-type vsphere

# Generate documentation
vrtg-provider generate docs --provider-type vsphere
</code></pre>
<h4 id="verify"><a class="header" href="#verify">verify</a></h4>
<p>Verify provider implementation.</p>
<pre><code class="language-bash"># Verify provider structure
vrtg-provider verify structure --path ./my-provider

# Verify capabilities
vrtg-provider verify capabilities --path ./my-provider

# Verify API compatibility
vrtg-provider verify api --path ./my-provider --api-version v1beta1
</code></pre>
<h4 id="publish"><a class="header" href="#publish">publish</a></h4>
<p>Publish provider artifacts.</p>
<pre><code class="language-bash"># Build and publish provider image
vrtg-provider publish --path ./my-provider --registry ghcr.io/myorg

# Publish with specific tag
vrtg-provider publish --path ./my-provider --tag v1.0.0

# Dry run publication
vrtg-provider publish --path ./my-provider --dry-run
</code></pre>
<h3 id="provider-structure"><a class="header" href="#provider-structure">Provider Structure</a></h3>
<pre><code>my-provider/
├── cmd/
│   └── provider-mytype/
│       ├── Dockerfile
│       └── main.go
├── internal/
│   └── provider/
│       ├── provider.go
│       ├── capabilities.go
│       └── provider_test.go
├── deploy/
│   ├── provider.yaml
│   ├── service.yaml
│   └── deployment.yaml
├── docs/
│   └── README.md
├── go.mod
├── go.sum
└── Makefile
</code></pre>
<h2 id="virtrigaud-loadgen"><a class="header" href="#virtrigaud-loadgen">virtrigaud-loadgen</a></h2>
<p>Load testing and performance benchmarking tool for VirtRigaud providers.</p>
<h3 id="global-flags-3"><a class="header" href="#global-flags-3">Global Flags</a></h3>
<pre><code class="language-bash">--kubeconfig string   Path to kubeconfig file
--namespace string    Test namespace (default: "loadgen")
--output-dir string   Output directory for results
--config-file string  Load generation configuration file
--dry-run            Show what would be created without executing
--verbose            Verbose output
-h, --help          Help for virtrigaud-loadgen
</code></pre>
<h3 id="commands-3"><a class="header" href="#commands-3">Commands</a></h3>
<h4 id="run-1"><a class="header" href="#run-1">run</a></h4>
<p>Execute load generation scenarios.</p>
<pre><code class="language-bash"># Run default load test
virtrigaud-loadgen run --config loadtest.yaml

# Run with custom settings
virtrigaud-loadgen run --config loadtest.yaml --workers 50 --duration 10m

# Run specific scenario
virtrigaud-loadgen run --scenario vm-creation --vms 100

# Generate performance report
virtrigaud-loadgen run --config loadtest.yaml --output-dir ./perf-results
</code></pre>
<h4 id="scenarios"><a class="header" href="#scenarios">scenarios</a></h4>
<p>Manage load testing scenarios.</p>
<pre><code class="language-bash"># List available scenarios
virtrigaud-loadgen scenarios list

# Show scenario details
virtrigaud-loadgen scenarios get vm-lifecycle

# Validate scenario configuration
virtrigaud-loadgen scenarios validate --config custom-scenario.yaml
</code></pre>
<h4 id="analyze"><a class="header" href="#analyze">analyze</a></h4>
<p>Analyze load test results.</p>
<pre><code class="language-bash"># Generate performance report
virtrigaud-loadgen analyze --input ./perf-results

# Compare test runs
virtrigaud-loadgen analyze --compare run1.csv,run2.csv

# Generate charts
virtrigaud-loadgen analyze --input ./perf-results --charts
</code></pre>
<h3 id="load-test-configuration"><a class="header" href="#load-test-configuration">Load Test Configuration</a></h3>
<p>Create <code>loadtest.yaml</code>:</p>
<pre><code class="language-yaml">metadata:
  name: "vm-creation-load-test"
  description: "Test VM creation performance"

scenarios:
  - name: "vm-creation"
    type: "vm-lifecycle"
    workers: 20
    duration: "5m"
    resources:
      vmClass: "small"
      vmImage: "ubuntu-22-04"
      provider: "vsphere-prod"
    
  - name: "vm-scaling"
    type: "vmset-scaling"
    workers: 5
    iterations: 10
    scaling:
      min: 1
      max: 50
      step: 5

providers:
  - name: "vsphere-prod"
    type: "vsphere"
  - name: "libvirt-test"
    type: "libvirt"

output:
  format: ["csv", "json"]
  metrics: ["latency", "throughput", "errors"]
  
cleanup:
  enabled: true
  timeout: "15m"
</code></pre>
<h3 id="performance-scenarios"><a class="header" href="#performance-scenarios">Performance Scenarios</a></h3>
<h4 id="vm-lifecycle"><a class="header" href="#vm-lifecycle">VM Lifecycle</a></h4>
<ul>
<li>Create, start, stop, delete operations</li>
<li>Measures end-to-end VM management performance</li>
</ul>
<h4 id="burst-creation"><a class="header" href="#burst-creation">Burst Creation</a></h4>
<ul>
<li>Rapid VM creation under load</li>
<li>Tests provider scaling capabilities</li>
</ul>
<h4 id="vmset-scaling"><a class="header" href="#vmset-scaling">VMSet Scaling</a></h4>
<ul>
<li>Scale VMSets up and down</li>
<li>Measures horizontal scaling performance</li>
</ul>
<h4 id="provider-stress"><a class="header" href="#provider-stress">Provider Stress</a></h4>
<ul>
<li>High concurrent operations</li>
<li>Tests provider reliability under stress</li>
</ul>
<h3 id="results-analysis"><a class="header" href="#results-analysis">Results Analysis</a></h3>
<p>Load test results include:</p>
<ul>
<li><strong>Latency metrics</strong>: P50, P95, P99 response times</li>
<li><strong>Throughput</strong>: Operations per second</li>
<li><strong>Error rates</strong>: Failed operations percentage</li>
<li><strong>Resource usage</strong>: CPU, memory, network utilization</li>
<li><strong>Provider metrics</strong>: API call statistics</li>
</ul>
<p>Example output:</p>
<pre><code class="language-csv">timestamp,scenario,operation,latency_ms,status,provider
2025-01-15T10:00:01Z,vm-creation,create,2500,success,vsphere-prod
2025-01-15T10:00:03Z,vm-creation,create,2800,success,vsphere-prod
2025-01-15T10:00:05Z,vm-creation,create,failed,timeout,vsphere-prod
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="using-vrtg"><a class="header" href="#using-vrtg">Using vrtg</a></h3>
<ol>
<li><strong>Use namespaces</strong> to organize resources</li>
<li><strong>Set timeouts</strong> appropriately for your environment</li>
<li><strong>Use dry-run</strong> options for validation before execution</li>
<li><strong>Monitor operations</strong> with watch commands</li>
</ol>
<h3 id="testing-with-vcts"><a class="header" href="#testing-with-vcts">Testing with vcts</a></h3>
<ol>
<li><strong>Run core tests first</strong> to validate basic functionality</li>
<li><strong>Use separate namespaces</strong> for different test runs</li>
<li><strong>Clean up resources</strong> after testing</li>
<li><strong>Document test results</strong> for compliance tracking</li>
</ol>
<h3 id="developing-with-vrtg-provider"><a class="header" href="#developing-with-vrtg-provider">Developing with vrtg-provider</a></h3>
<ol>
<li><strong>Start with init</strong> to create proper structure</li>
<li><strong>Implement core capabilities</strong> before advanced features</li>
<li><strong>Test thoroughly</strong> with vcts before publishing</li>
<li><strong>Follow naming conventions</strong> for consistency</li>
</ol>
<h3 id="load-testing-with-virtrigaud-loadgen"><a class="header" href="#load-testing-with-virtrigaud-loadgen">Load Testing with virtrigaud-loadgen</a></h3>
<ol>
<li><strong>Start small</strong> and gradually increase load</li>
<li><strong>Monitor system resources</strong> during tests</li>
<li><strong>Use realistic scenarios</strong> that match production workloads</li>
<li><strong>Analyze results</strong> to identify bottlenecks</li>
</ol>
<h2 id="support"><a class="header" href="#support">Support</a></h2>
<ul>
<li><strong>Documentation</strong>: <a href="https://projectbeskar.github.io/virtrigaud/">VirtRigaud Docs</a></li>
<li><strong>Issues</strong>: <a href="https://github.com/projectbeskar/virtrigaud/issues">GitHub Issues</a></li>
<li><strong>Discussions</strong>: <a href="https://github.com/projectbeskar/virtrigaud/discussions">GitHub Discussions</a></li>
<li><strong>Community</strong>: <a href="https://discord.gg/projectbeskar">Discord</a></li>
</ul>
<h2 id="version-information"><a class="header" href="#version-information">Version Information</a></h2>
<p>This documentation covers VirtRigaud CLI tools v0.2.0.</p>
<p>For older versions, see the <a href="https://github.com/projectbeskar/virtrigaud/releases">releases page</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../CLI.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../api-reference/metrics.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../CLI.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../api-reference/metrics.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/page-toc.js"></script>


    </div>
    </body>
</html>
